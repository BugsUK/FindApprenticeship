@using System.Web.Mvc.Html
@using SFA.Apprenticeships.Domain.Entities.Raa.Vacancies
@using SFA.Apprenticeships.Web.Manage.Constants
@model List<StandardSubjectAreaTierOne>
@{
    ViewBag.Title = "Standards";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1 id="heading" class="heading-xlarge">Standards</h1>

<p>
    @Html.RouteLink("Add Standard", ManagementRouteNames.AdminCreateStandard)
</p>
@Html.RouteLink("Download Standards", ManagementRouteNames.AdminStandardsCsv)

<table>
    <tr>
        <th>ID</th>
        <th>SSAT1</th>
        <th>Standard Sector</th>
        <th>Standard</th>
        <th></th>
    </tr>

    @foreach (var standardSector in Model.SelectMany(s => s.Sectors).OrderBy(s => s.Name))
    {
        var ssat1 = Model.Single(s => s.Id == standardSector.ApprenticeshipOccupationId);

        foreach (var standard in standardSector.Standards.OrderBy(s => s.Name))
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => standard.StandardId)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => ssat1.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => standardSector.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => standard.Name)
                </td>
                <td>
                    @Html.RouteLink("View", ManagementRouteNames.AdminViewStandard, new { standard.StandardId })
                </td>
            </tr>
        }
    }
</table>
