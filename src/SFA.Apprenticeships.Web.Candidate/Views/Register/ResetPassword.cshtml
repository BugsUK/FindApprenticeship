@model PasswordResetViewModel

@{
    ViewBag.Title = "SFA Apprenticeships - Reset Password";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using (Html.BeginForm("ResetPassword", "Register", FormMethod.Post, new { @id = "reset-password-form" }))
{
    @Html.Partial("ValidationSummary", ViewData.ModelState)


    <fieldset class="inner-block-padr">
        <legend class="heading-large">Password reset</legend>
        
        @if (TempData["ResentCode"] != null)
        {
            <p id="ResentCodeText">TODO: Password reset code sent to @Model.EmailAddress.</p>
        }

        <p class="text">Enter your 6-digit code and you can then reset your password</p>
        <div class="form-group">
            <p class="form-label">Email address</p>
            <span class="form-prepopped">@Html.DisplayFor(m => m.EmailAddress)</span>
        </div>

        @Html.FormTextFor(m => m.PasswordResetCode, controlHtmlAttributes: new { @class = "form-control-2-3", @maxlength = "6" })

        <div class="form-group">
            @Html.LabelFor(m => m.Password, new { @class = "form-label" })

            <span class="form-hint text">Must contain letters, numbers, symbols and be at least 8 characters.</span>
            <div class="password-wrapper">
                @Html.PasswordFor(m => m.Password, new { @class = "form-control" })
                <span class="pw-masktoggle button-link hide-nojs">Show</span>
                @Html.ValidationMessageFor(m => m.Password, null, new { @class = "hidden" })
            </div>
            <p class="form-hint strength-indicator hide-nojs">Password strength: <span id="pass_meter" class=""></span></p>
        </div>
        <div class="form-group">
            <button class="button" id="reset-password-button">Reset password</button>
        </div>
        <div class="form-group">
            @Html.ActionLink("Resend Password Reset Code", "ResendPasswordResetCode", new { @emailAddress = Model.EmailAddress }, null)
        </div>

        @Html.HiddenFor(m => m.EmailAddress)

    </fieldset>
}

@section scripts{
    <script src="@Url.Content("~/Content/_assets/js/vendor/zxcvbn-async.js")"></script>
}