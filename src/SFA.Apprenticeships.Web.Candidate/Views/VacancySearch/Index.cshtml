@using Newtonsoft.Json
@model SFA.Apprenticeships.Web.Candidate.ViewModels.VacancySearch.VacancySearchViewModel

@{
    ViewBag.Title = "SFA Apprenticeships";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="hgroup">
    <h1 class="heading-xlarge">Find an Apprenticeship</h1>
    <h2 class="subtitle">Search and apply for an Apprenticeship in England</h2>
</div>
<div class="grid-wrapper">
    <section class="grid grid-2-3">
        
        @using(Html.BeginForm("results", "vacancysearch", FormMethod.Get)){
            <div class="form-group">
                <label for="job-title" class="form-label">Job title (optional)</label>
                <span class="form-hint">For example, mechanical engineer</span>
                @Html.TextBoxFor(m => m.JobTitle, new { @class = "form-control", @id = "job-title", @name = "JobTitle" })
            </div>
            <div class="form-group">
                <label for="keywords" class="form-label">Keyword (optional)</label>
                <span class="form-hint">For example, retail, customer service</span>
                @Html.TextBoxFor(m => m.Keywords, new { @class = "form-control", @id = "keywords", @name = "Keywords" })
            </div>
            <div class="form-group">
                <label for="location" class="form-label">Apprenticeship location</label>
                <span class="form-hint">Enter postcode, town or city</span>
                @Html.TextBoxFor(m => m.Location, new { @class = "form-control", @id = "location", @name = "Location" })
                @Html.HiddenFor(m => m.Latitude, new { @id = "latitude", @name = "Latitude" })
                @Html.HiddenFor(m => m.Longitude, new { @id = "longitude", @name = "Longitude" })
            </div>
            <div class="form-group">
                <label for="loc-within" class="form-label">Within</label>
                @Html.DropDownListFor(m => m.WithinDistance, (SelectList)ViewBag.Distances, new { @id = "loc-within", @name = "WithinDistance" })
            </div>
            <div class="form-group">
                <button class="button">Search</button>
                <a class="button-link" href="@Url.Action("clear")">Clear</a>
            </div>

        }
        <div class="form-group">
            <p>You can also apply for Apprenticeships in other parts of the UK</p>
            <ul>
                <li><a href="#">Apprenticeships in Northern Ireland</a></li>
                <li><a href="#">Apprenticeships in Scotland</a></li>
                <li><a href="#">Apprenticeships in Wales</a></li>
            </ul>
        </div>
    </section>
    <aside class="grid grid-1-3">
        <div class="inner-block">
            <div class="gov-border">
                <h2 class="heading-medium">Elsewhere on GOV.UK</h2>
                <a href="overview.html">About Apprenticeships</a>
            </div>
        </div>
    </aside>
</div>

@section scripts
{
        <!-- TODO::Needs sorting with Henry -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>

    <script src="~/Content/_assets/js/nas/locationAutocomplete.js"></script>      
    <script>
        $("#location").locationMatch({
            url: '@Url.Action("location", "vacancysearch")',
            longitude: '#longitude',
            latitude: '#latitude'
        });
    </script>
}